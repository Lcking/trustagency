# 🔍 TrustAgency 后台管理系统 - 现场验收检查清单

## 📌 系统信息
- **系统地址**: http://localhost:3000/admin/index.html
- **默认账号**: admin
- **默认密码**: admin123
- **后端 API**: http://localhost:8001
- **测试日期**: 2025-11-10

---

## 🚀 系统启动状态

✅ **后端服务**: 已在 8001 端口启动（FastAPI）
✅ **前端服务**: 已在 3000 端口启动（静态 HTTP 服务器）
✅ **数据库**: SQLite 已初始化

**验收前请确认**:
- [ ] 后端 API 服务正常运行 (`curl http://localhost:8001/api/admin/login`)
- [ ] 前端页面可正常访问 (打开 http://localhost:3000/admin/index.html)
- [ ] 浏览器控制台无严重错误

---

## 📋 验收检查项目

### ✨ **第 1 个 Bug: 栏目管理 - 分类添加/删除**

**🎯 目标**: 验证分类管理功能（添加和删除分类）

**步骤**:
1. **登录系统**
   - 输入用户名: `admin`
   - 输入密码: `admin123`
   - 点击"登录"按钮
   - ✓ 预期: 进入主页面

2. **进入栏目管理**
   - 在左侧菜单点击"栏目管理"
   - ✓ 预期: 显示栏目列表

3. **展开栏目详情**
   - 点击第一个栏目（如 "常见问题"）
   - ✓ 预期: 栏目详情展开，显示该栏目下的分类

4. **验证分类添加界面**
   - 查看是否有一个文本输入框（标签: "新增分类"）
   - 查看是否有"+ 添加分类"按钮
   - ✓ 预期: 两个元素都存在

5. **测试添加分类**
   - 在输入框中输入: `测试分类001`
   - 点击"+ 添加分类"按钮
   - ✓ 预期: 
     - 分类立即出现在列表中
     - 无错误消息
     - 输入框被清空

6. **验证分类删除界面**
   - 查看刚添加的分类右侧是否有"删除"按钮
   - ✓ 预期: 删除按钮存在

7. **测试删除分类**
   - 点击"测试分类001"旁边的"删除"按钮
   - ✓ 预期: 
     - 弹出确认对话框
     - 确认删除后分类从列表中移除

**✅ 验收结果**: ________ (通过/失败/有问题)
**备注**: _________________________________________________________________

---

### ✨ **第 2 个 Bug: 平台管理 - 编辑保存**

**🎯 目标**: 验证平台编辑功能，确保无认证错误

**步骤**:
1. **进入平台管理**
   - 在左侧菜单点击"平台管理"
   - ✓ 预期: 显示平台列表

2. **打开平台编辑**
   - 找到任一平台（如 "AlphaLeverage"）
   - 点击"编辑"按钮
   - ✓ 预期: 弹出编辑模态框

3. **修改平台信息**
   - 修改一个字段，如修改网址或描述
   - 例如: 网址改为 `https://example.com`
   - ✓ 预期: 字段可编辑，无错误

4. **保存平台信息**
   - 点击"保存"按钮
   - ✓ 预期: 
     - **无** "Invalid authentication credentials" 错误
     - 显示成功消息（如 "平台已更新"）
     - 模态框关闭
     - 列表中的平台信息更新

5. **验证数据持久化**
   - 重新打开同一平台的编辑框
   - ✓ 预期: 修改的内容仍然保留

**✅ 验收结果**: ________ (通过/失败/有问题)
**备注**: _________________________________________________________________

---

### ✨ **第 3 个 Bug: Tiptap 编辑器加载**

**🎯 目标**: 验证富文本编辑器能正常加载和使用

**步骤**:
1. **进入文章管理**
   - 在左侧菜单点击"文章管理"
   - ✓ 预期: 显示文章列表

2. **打开文章编辑**
   - 点击任意文章的"编辑"按钮
   - ✓ 预期: 文章编辑页面打开

3. **检查编辑器加载**
   - 查看内容区是否有 Tiptap 富文本编辑器
   - ✓ 预期:
     - 显示编辑器容器
     - 不显示 textarea 降级方案
     - 浏览器控制台无错误（检查 F12 开发者工具 → Console）

4. **测试编辑器功能**
   - 在编辑器中输入一些文本: `测试文本`
   - 选中文本
   - ✓ 预期: 可正常输入和选中

5. **测试格式化工具**
   - 查看工具栏是否显示（加粗、斜体、列表等按钮）
   - 尝试点击"加粗"按钮并输入文本
   - ✓ 预期: 工具栏存在且可点击

6. **验证编辑器稳定性**
   - 多次输入和格式化
   - ✓ 预期: 无崩溃或卡顿

**✅ 验收结果**: ________ (通过/失败/有问题)
**备注**: _________________________________________________________________

---

### ✨ **第 4 个 Bug: AI 任务 - 分类下拉框加载**

**🎯 目标**: 验证栏目选择时分类自动加载

**步骤**:
1. **进入 AI 任务**
   - 在左侧菜单点击"AI 任务"
   - ✓ 预期: 显示任务列表

2. **打开任务编辑/新增**
   - 点击"新增任务"或编辑任务
   - ✓ 预期: 任务编辑表单打开

3. **测试栏目选择**
   - 从"栏目"下拉菜单选择 "常见问题"
   - ✓ 预期: 栏目选择成功

4. **验证分类自动加载**
   - 选择栏目后，查看"分类"下拉菜单
   - ✓ 预期:
     - 分类下拉菜单不再为空
     - 显示该栏目的所有分类
     - 例如: 账户与安全、交易相关、提现充值 等

5. **测试切换栏目**
   - 改变栏目选择为 "百科"
   - ✓ 预期:
     - "分类"下拉菜单重新加载
     - 显示"百科"栏目的分类
     - 例如: 区块链基础、加密货币 等

6. **验证无错误**
   - 查看浏览器控制台（F12 → Console）
   - ✓ 预期: 无错误消息

**✅ 验收结果**: ________ (通过/失败/有问题)
**备注**: _________________________________________________________________

---

### ✨ **第 5 个 Bug: AI 配置 - 设置默认按钮**

**🎯 目标**: 验证设置默认配置时无认证错误

**步骤**:
1. **进入 AI 配置管理**
   - 在左侧菜单点击"AI 配置"
   - ✓ 预期: 显示配置列表

2. **查看配置列表**
   - 验证列表中每个配置右侧有单选框
   - ✓ 预期: 单选框存在

3. **选择默认配置**
   - 点击某个配置右侧的单选框
   - ✓ 预期:
     - **无** "Invalid authentication credentials" 错误
     - 显示成功消息（如 "已设置为默认配置"）
     - 该单选框被选中

4. **验证默认配置更新**
   - 观察列表中的默认配置标记是否更新
   - ✓ 预期: 新选择的配置被标记为默认

5. **刷新验证持久化**
   - 按 F5 刷新页面
   - ✓ 预期:
     - 页面重新加载后登录状态保持
     - 默认配置设置仍然生效

6. **验证无错误**
   - 查看浏览器控制台（F12 → Console）
   - ✓ 预期: 无 401 或认证错误

**✅ 验收结果**: ________ (通过/失败/有问题)
**备注**: _________________________________________________________________

---

## 📊 最终验收总结

| 功能 | 状态 | 是否通过 |
|------|------|--------|
| ✨ bug_009: 栏目分类添加/删除 | | ☐ 通过 ☐ 失败 |
| ✨ bug_010: 平台编辑保存 | | ☐ 通过 ☐ 失败 |
| ✨ bug_011: Tiptap 编辑器加载 | | ☐ 通过 ☐ 失败 |
| ✨ bug_012: AI 任务分类加载 | | ☐ 通过 ☐ 失败 |
| ✨ bug_013: AI 配置默认设置 | | ☐ 通过 ☐ 失败 |

### 🎯 最终评分

- **5/5 通过**: ✅ 系统已完全验收，所有功能正常
- **4/5 通过**: ⚠️ 系统基本可用，需要处理 1 个问题
- **3/5 通过**: ⚠️ 系统需要改进，存在 2 个问题
- **<3/5**: ❌ 系统不可用，需要重新修复

**最终评分**: ________

---

## 💡 故障排查

### 如果遇到问题，请检查:

1. **后端连接问题**
   ```bash
   curl http://localhost:8001/api/admin/login \
     -X POST \
     -H "Content-Type: application/json" \
     -d '{"username":"admin","password":"admin123"}'
   ```

2. **浏览器控制台错误** (F12 → Console 标签)
   - 检查是否有 CORS 错误
   - 检查是否有网络错误
   - 检查是否有 JavaScript 错误

3. **清除浏览器缓存**
   ```
   按 Ctrl+Shift+Del (或 Cmd+Shift+Del on Mac)
   选择"清除缓存和 Cookie"
   ```

4. **检查服务状态**
   ```bash
   # 检查后端
   ps aux | grep python
   
   # 检查前端
   ps aux | grep "http.server"
   ```

---

## 📝 签名

**测试人员**: ____________________  
**测试日期**: ____________________  
**验收时间**: ____________________  
**批准人**: ____________________  

---

**备注**: 
所有修改已在 `/Users/ck/Desktop/Project/trustagency/backend/site/admin/index.html` 中完成。
如需重新部署，请重启后端和前端服务。


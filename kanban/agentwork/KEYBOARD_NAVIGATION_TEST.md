# A-7 键盘导航测试指南

**测试类型**: 手动验证  
**测试范围**: 全站 8 页面  
**预期时间**: 1.5-2 小时  
**测试环境**: macOS + Safari/Chrome

---

## 📋 键盘导航测试清单

### 基础键盘快捷键

| 快捷键 | 功能 | 预期结果 |
|--------|------|---------|
| Tab | 前进到下一个可交互元素 | ✓ 应该有清晰的焦点指示 |
| Shift + Tab | 后退到上一个可交互元素 | ✓ 应该逆向遍历 |
| Enter | 激活按钮或链接 | ✓ 应该触发操作 |
| Space | 激活复选框或按钮 | ✓ 应该切换状态 |
| Escape | 关闭菜单或模态框 | ✓ 应该返回上级视图 |

---

## 🧪 分页面测试用例

### 1. 首页 (index.html)

#### 导航测试
- [ ] Tab 键从顶部开始，第一个可交互元素应该是导航或跳转链接
- [ ] 继续 Tab，应该访问：导航菜单 → 按钮 → 链接
- [ ] 焦点指示器清晰可见（轮廓或背景颜色变化）
- [ ] Shift + Tab 能反向遍历

#### 按钮测试
- [ ] 首页上的按钮（如"立即开始"）可用 Tab 访问
- [ ] 按 Enter 或 Space 能激活
- [ ] 按钮获得焦点时有清晰的视觉反馈

#### 链接测试
- [ ] 导航链接可用 Tab 访问
- [ ] 链接文本清晰表达目标页面
- [ ] 按 Enter 能打开链接

#### 菜单测试（如果有）
- [ ] Tab 能访问菜单触发器
- [ ] Enter 或 Space 能打开菜单
- [ ] 菜单项可用箭头键或 Tab 导航
- [ ] Escape 能关闭菜单

**测试报告**:
```
首页键盘导航测试
总元素数: ___
可访问元素: ___
Tab 顺序: ___
焦点指示器: ___
问题: ___
```

### 2. 关于页 (about/index.html)

#### 基础测试
- [ ] 页面加载后 Tab 到第一个可交互元素
- [ ] 检查焦点顺序是否逻辑合理（从上到下、从左到右）
- [ ] 所有链接都可访问
- [ ] 所有按钮都可激活

**特定测试**:
- [ ] "了解更多" 按钮可用键盘激活
- [ ] 社交媒体链接可用 Tab 访问
- [ ] 没有焦点陷阱（Tab 不会卡在某个地方）

### 3. 对比页 (compare/index.html)

#### 表格/对比交互
- [ ] Tab 能访问所有对比按钮
- [ ] 对比选项可以通过键盘选择
- [ ] 结果更新时有焦点管理

#### 按钮组测试
- [ ] 平台选择按钮可用 Tab 访问
- [ ] 按 Enter 或 Space 能切换选择
- [ ] 焦点在活跃项上清晰可见

### 4. FAQ 页 (qa/index.html)

#### 手风琴/折叠菜单测试
- [ ] 问题标题可用 Tab 访问
- [ ] Enter 或 Space 能展开/收起
- [ ] 焦点在展开/收起时保持在标题上
- [ ] 内容展开时不会产生焦点跳跃

#### 完整流程
- [ ] 从上到下遍历所有问题
- [ ] 每个问题都能通过键盘操作
- [ ] 没有键盘陷阱

### 5. 平台列表 (platforms/index.html)

#### 列表导航
- [ ] 每个平台卡片中的链接可用 Tab 访问
- [ ] "查看详情" 按钮可激活
- [ ] 焦点顺序清晰

#### 过滤/排序（如果有）
- [ ] 过滤按钮可用键盘操作
- [ ] 结果更新后焦点管理良好

### 6. Wiki 文章 (wiki/what-is-leverage/index.html)

#### 内容导航
- [ ] 文章标题可访问
- [ ] 链接到其他文章可用 Tab 访问
- [ ] 代码块或特殊内容不产生焦点问题

#### 相关链接
- [ ] "相关文章" 部分的链接可用键盘访问
- [ ] 链接文本清晰

### 7. Guides 文章 (guides/quick-start/index.html)

#### 步骤导航
- [ ] 各步骤标题清晰
- [ ] 步骤中的按钮可用键盘激活
- [ ] 表单字段可用 Tab 访问和填写

#### 表单测试
- [ ] 每个输入字段都有关联的标签
- [ ] Tab 能遍历所有表单字段
- [ ] 表单提交按钮可用键盘激活

### 8. 法律页 (legal/index.html)

#### 长文本导航
- [ ] 标题可用 Tab 访问（通过链接）
- [ ] 没有焦点问题
- [ ] 链接可用键盘打开

---

## 🔍 通用检查项

### Tab 顺序验证

**步骤**:
1. 打开页面
2. 按 Tab 键记录顺序
3. 验证顺序是否合理

**期望**:
```
1. 跳过链接 (Skip to main content) - 如果有
2. 导航元素
3. 主要内容
4. 侧边栏 - 如果有
5. 页脚元素
```

### 焦点可见性检查

**检查点**:
- [ ] 焦点指示器颜色对比度足够 (4.5:1)
- [ ] 焦点指示器不被内容遮挡
- [ ] 焦点指示器在所有交互元素上清晰
- [ ] 焦点指示器宽度至少 2px

**不接受**:
- ❌ 焦点指示器缺失
- ❌ 焦点指示器太淡看不清
- ❌ 焦点指示器与背景混合

### 无焦点陷阱验证

**焦点陷阱定义**: 用户 Tab 进入某个元素后无法 Tab 出去

**测试方法**:
1. 在每个可交互元素上按 Tab
2. 验证能否继续 Tab 到下一个元素
3. 特别检查模态框、菜单、输入框

**常见焦点陷阱**:
- ❌ JavaScript 陷阱焦点在模态框内
- ❌ Menu 打开时焦点无法逃脱
- ❌ 自定义组件限制焦点

---

## 📊 测试记录表

### 页面测试总结

```markdown
| 页面 | Tab 顺序 | 焦点可见 | 陷阱 | 评分 | 备注 |
|------|---------|---------|------|------|------|
| 首页 | ✅ | ✅ | ✅ | A | |
| 关于 | ✅ | ✅ | ✅ | A | |
| 对比 | ✅ | ✅ | ✅ | A | |
| 法律 | ✅ | ✅ | ✅ | A | |
| 平台 | ✅ | ✅ | ✅ | A | |
| FAQ | ✅ | ✅ | ✅ | A | |
| Wiki | ✅ | ✅ | ✅ | A | |
| Guides | ✅ | ✅ | ✅ | A | |
```

### 评分标准

- **A**: 完美 - 所有检查项通过，焦点管理优秀
- **B**: 良好 - 大部分通过，有轻微改进空间
- **C**: 可用 - 基本可用，需要改进
- **D**: 有问题 - 有多个问题需要修复
- **F**: 失败 - 无法通过键盘使用

---

## ⚙️ 常见问题排查

### 问题 1: 焦点看不见

**症状**: Tab 时看不到焦点在哪里

**解决方案**:
```css
/* 确保焦点样式存在 */
:focus {
  outline: 3px solid #4A90E2;
  outline-offset: 2px;
}

/* 不要移除焦点 */
/* ❌ 不要这样做 */
*:focus { outline: none; }
```

### 问题 2: Tab 顺序错乱

**症状**: Tab 顺序不符合页面布局

**原因**: 可能使用了不正确的 `tabindex`

**解决方案**:
```html
<!-- ❌ 不好 - 显式 tabindex -->
<button tabindex="3">按钮 3</button>
<button tabindex="1">按钮 1</button>
<button tabindex="2">按钮 2</button>

<!-- ✅ 好 - 使用 DOM 顺序 -->
<button>按钮 1</button>
<button>按钮 2</button>
<button>按钮 3</button>
```

### 问题 3: 焦点陷阱

**症状**: Tab 进入某个区域后无法离开

**常见原因**:
- 模态框中的焦点陷阱
- JavaScript 阻止焦点移动

**解决方案**:
```javascript
// 模态框中管理焦点
const focusableElements = dialog.querySelectorAll(
  'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
);
const firstElement = focusableElements[0];
const lastElement = focusableElements[focusableElements.length - 1];

dialog.addEventListener('keydown', (e) => {
  if (e.key === 'Tab') {
    if (e.shiftKey) {
      if (document.activeElement === firstElement) {
        e.preventDefault();
        lastElement.focus();
      }
    } else {
      if (document.activeElement === lastElement) {
        e.preventDefault();
        firstElement.focus();
      }
    }
  }
});
```

---

## 📋 测试完成清单

- [ ] 所有 8 个页面都进行了键盘导航测试
- [ ] Tab 顺序都经过验证
- [ ] 焦点可见性都检查通过
- [ ] 没有发现焦点陷阱
- [ ] 测试记录已保存
- [ ] 发现的问题已记录
- [ ] 问题已分类 (Critical/Major/Minor)

---

## 🎯 预期结果

如果所有测试通过，您应该能够：
- ✅ 使用 Tab 键访问页面上的所有交互元素
- ✅ 清晰看到焦点在哪个元素上
- ✅ 使用 Enter/Space 激活按钮和链接
- ✅ 不卡在任何元素上（无焦点陷阱）
- ✅ 体验与鼠标用户相同的功能

---

**测试工程师**: 您  
**开始日期**: 2025-10-21  
**完成日期**: ___  
**总体评分**: ___


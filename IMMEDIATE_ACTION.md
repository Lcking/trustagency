# 🎯 系统恢复 - 你需要立即做的5件事

因为聊天记录丢失，我基于文档恢复的进度是：
- ✅ bug修复已完成（前3个：HTTP方法、验证规则、表单渲染）
- ❌ bug验收测试还没做
- ❌ 你说的15个其他bug还没处理
- ⚠️ oldbug001（分类丢失）有被还原的风险

---

## 🚨 立即行动计划

### **任务1：启动后端并检查状态（5分钟）**

打开terminal，运行：

```bash
cd /Users/ck/Desktop/Project/trustagency/backend
python -m uvicorn app.main:app --reload --port 8000
```

**预期结果**：应该看到
```
INFO:     Uvicorn running on http://0.0.0.0:8000
```

**如果出错**：告诉我错误信息

---

### **任务2：恢复分类数据（3分钟）**

在另一个terminal窗口运行：

```bash
cd /Users/ck/Desktop/Project/trustagency/backend
python restore_categories.py
```

**预期结果**：
```
✅ 恢复完成! 共添加 XX 个分类
📊 验证结果:
  常见问题: 5 个分类
  百科: 5 个分类
  指南: 5 个分类
  平台评测: 5 个分类
```

**如果输出显示 "共添加 0 个分类"** → 分类可能已经存在（这是好事）

---

### **任务3：打开浏览器验证（2分钟）**

访问：`http://localhost:8000/admin/`

**检查清单**：
- [ ] 页面能加载（不是404或500错误）
- [ ] 看到登录表单
- [ ] 输入 `admin` / `admin123` 能登录成功
- [ ] 进入后台后，能看到菜单项

---

### **任务4：验证核心功能（5分钟）**

进入后台后，逐个测试：

1. **栏目管理**
   - 点击菜单"栏目管理"
   - 检查：是否显示4个栏目（常见问题、百科、指南、平台评测）
   - 检查：每个栏目下是否有分类显示

2. **平台管理**
   - 点击菜单"平台管理"
   - 点击"编辑"任何一个平台
   - 输入 commission_rate = 0.005
   - 点击"保存"
   - 检查：是否保存成功（不是"Invalid authentication credentials"错误）

3. **AI任务**
   - 点击菜单"AI任务"
   - 选择一个栏目
   - 检查：下拉框中是否显示该栏目的分类

---

### **任务5：报告你的发现（1分钟）**

告诉我：

```
✅ 完成的项目：
- 后端启动: [成功/失败]
- 分类恢复: [X个分类已恢复]
- 登录测试: [成功/失败]
- 栏目管理: [成功/失败，问题描述]
- 平台编辑: [成功/失败，问题描述]
- AI任务: [成功/失败，问题描述]

❌ 遇到的问题：
[具体错误信息或症状描述]
```

---

## 📋 如果某一步失败了

### 失败1：后端启动报错

**常见错误1**：`ModuleNotFoundError`
```bash
# 解决：安装依赖
cd /Users/ck/Desktop/Project/trustagency/backend
pip install -r requirements.txt
```

**常见错误2**：`address already in use`
```bash
# 解决：端口被占用，杀死占用进程
lsof -i :8000
kill -9 <PID>
# 或改用其他端口
python -m uvicorn app.main:app --reload --port 8001
```

### 失败2：恢复分类时出错

```bash
# 检查是否是权限问题
python restore_categories.py 2>&1 | head -50
```

### 失败3：登录失败

- 确认用户名是 `admin`，密码是 `admin123`
- 如果不确定，检查后端log中是否有认证相关错误

### 失败4：功能测试失败

- 打开浏览器F12 → Console标签，看是否有JS错误
- 打开浏览器F12 → Network标签，看API请求是否返回错误

---

## ⏰ 时间估算

完成全部5个任务：**≈15-20分钟**

---

## 🎯 目标

完成这些步骤后，我们就能：
1. ✅ 确认系统状态
2. ✅ 找出真正卡住的地方
3. ✅ 有针对性地修复剩余的15个bug

**立即开始！** 💪

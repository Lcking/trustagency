<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- Primary Meta Tags -->
    <title>平台对比 - 详细功能与费率对比表 - 鹰眼查融</title>
    <meta name="title" content="平台对比 - 详细功能与费率对比表 - 鹰眼查融">
    <meta name="description" content="详细对比券商两融和各类杠杆平台的费用、杠杆比例、保证金要求、安全性等关键指标。">
    <meta name="keywords" content="平台对比,费率比较,杠杆对比,融资融券对比">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.yycr.net/compare/">
    <meta property="og:title" content="平台对比 - 详细功能与费率对比表 - 鹰眼查融">
    <meta property="og:description" content="详细对比券商两融和各类杠杆平台的费用、杠杆比例、保证金要求、安全性等关键指标。">
    
    <!-- Canonical -->
    <link rel="canonical" href="https://www.yycr.net/compare/">
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    
    <!-- Main Stylesheet -->
    <link href="/assets/css/main.css" rel="stylesheet">
    <link href="/assets/css/utilities.css" rel="stylesheet">

    <!-- BreadcrumbList Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "首页",
                "item": "https://www.yycr.net/"
            },
            {
                "@type": "ListItem",
                "position": 2,
                "name": "对比",
                "item": "https://www.yycr.net/compare/"
            }
        ]
    }
    </script>
</head>
<body>
    
    <!-- Header / Navigation -->
    <header role="banner">
        <nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" role="navigation" aria-label="主导航">
            <div class="container">
                <a class="navbar-brand fw-bold" href="/" aria-label="鹰眼查融首页">
                    <span>鹰眼</span><span class="d-none d-sm-inline">查融</span>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="切换导航菜单">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="/">首页</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/platforms/">平台</a>
                        </li>
                                                <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="/compare/">对比</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/qa/">常见问题</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarResources" role="button" data-bs-toggle="dropdown" aria-expanded="false">资源</a>
                            <ul class="dropdown-menu" aria-labelledby="navbarResources">
                                <li><a class="dropdown-item" href="/wiki/">百科</a></li>
                                <li><a class="dropdown-item" href="/guides/">指南</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="/about/">关于</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- Breadcrumb Navigation -->
    <nav aria-label="breadcrumb" class="d-none d-md-block bg-light border-bottom py-2">
        <div class="container">
            <ol class="breadcrumb mb-0">
                <li class="breadcrumb-item"><a href="/">首页</a></li>
                <li class="breadcrumb-item active" aria-current="page">对比</li>
            </ol>
        </div>
    </nav>

    <!-- Main Content -->
    <main role="main" id="main-content" class="py-5">
        <div class="container">
            <!-- Page Header -->
            <section class="mb-5" aria-labelledby="page-title">
                <h1 id="page-title" class="display-5 fw-bold mb-3">平台对比</h1>
                <p class="lead text-muted">
                    详细对比各个股票杠杆交易平台的费用、杠杆比例、工具、安全性等关键指标。
                </p>
            </section>

            <!-- Comparison Table -->
            <section aria-labelledby="comparison-title" class="mb-5">
                <h2 id="comparison-title" class="sr-only">平台对比表</h2>
                
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <caption class="d-none">股票杠杆交易平台对比表</caption>
                        <thead class="table-light">
                            <tr>
                                <th scope="col">平台名称</th>
                                <th scope="col">最高杠杆</th>
                                <th scope="col">手续费</th>
                                <th scope="col">最低入金</th>
                                <th scope="col">安全评级</th>
                                <th scope="col">操作</th>
                            </tr>
                        </thead>
                        <tbody id="comparison-table-body">
                            <tr>
                                <td colspan="6" class="text-center py-4">
                                    <div class="spinner-border text-primary" role="status">
                                        <span class="visually-hidden">加载中...</span>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Detailed Comparison Section -->
            <section class="mb-5" aria-labelledby="detailed-comparison-title">
                <h2 id="detailed-comparison-title" class="h4 mb-4">详细对比</h2>
                
                <div id="detailed-comparison-container" class="row g-4">
                    <!-- Detailed comparison cards loaded dynamically -->
                </div>
            </section>

            <!-- Help Section -->
            <section class="mt-5 p-4 bg-light rounded">
                <h2 class="h5 mb-3">需要帮助选择？</h2>
                <p class="text-muted mb-3">
                    查看 <a href="/qa/">常见问题</a> 或 <a href="/guides/">指南</a> 了解更多关于如何选择合适平台的建议。
                </p>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-dark text-white py-5 mt-5" role="contentinfo" aria-label="页脚">
        <div class="container">
            <div class="row g-4">
                <div class="col-md-4">
                    <h3 class="h6 mb-3">关于我们</h3>
                    <p class="small text-muted">
                        为投资者提供专业、透明的杠杆平台信息和交易指南。
                    </p>
                </div>
                <div class="col-md-4">
                    <h3 class="h6 mb-3">快速链接</h3>
                    <ul class="list-unstyled small">
                        <li><a href="/platforms/" class="text-decoration-none text-muted hover-primary">平台列表</a></li>
                        <li><a href="/compare/" class="text-decoration-none text-muted hover-primary">平台对比</a></li>
                        <li><a href="/about/" class="text-decoration-none text-muted hover-primary">关于我们</a></li>
                        <li><a href="/legal/" class="text-decoration-none text-muted hover-primary">法律声明</a></li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <h3 class="h6 mb-3">联系我们</h3>
                    <p class="small text-muted mb-0">
                        Email: <a href="mailto:support@yycr.net" class="text-decoration-none text-muted hover-primary">support@yycr.net</a>
                    </p>
                </div>
            </div>
            <hr class="border-secondary my-4">
            <div class="text-center small text-muted">
                <p class="mb-1">
                    © 2025 上海薏雅征信。版权所有。
                </p>
                <p class="mb-0">
                    <a href="/legal/" class="text-decoration-none text-muted hover-primary">法律声明</a> | 
                    <a href="/legal/#disclaimer" class="text-decoration-none text-muted hover-primary">风险声明</a> | 
                    <span>更新时间：2025-10-21</span>
                </p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap 5 Bundle JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    
    <!-- API Client -->
    <script src="/assets/js/api-client.js"></script>
    
    <!-- Comparison Page Script -->
    <script>
        // 平台特性数据映射
        const platformFeatures = {
            'alpha-leverage': {
                advantages: ['最高杠杆 (1:100)', '最低费率 (0.05%)', '24/7 客户支持', '专业交易工具'],
                suitable: '经验丰富的交易者',
                colorClass: 'bg-primary'
            },
            'alphaleverage': {
                advantages: ['最高杠杆 (1:500)', '24/7 客户支持', '专业交易工具', '多资产支持'],
                suitable: '专业交易者',
                colorClass: 'bg-primary'
            },
            'beta-margin': {
                advantages: ['风险管理工具完善', '高度安全性 (A 级)', '客户支持优秀', '合规监管'],
                suitable: '风险厌恶型投资者',
                colorClass: 'bg-info'
            },
            'betamargin': {
                advantages: ['风险管理工具完善', '高度安全性', '客户支持优秀', '合规监管'],
                suitable: '风险厌恶型投资者',
                colorClass: 'bg-info'
            },
            'gamma-trader': {
                advantages: ['新手友好', '教育资源丰富', '最低入金门槛', '详细指南和教程'],
                suitable: '初学者',
                colorClass: 'bg-success'
            },
            'gammatrader': {
                advantages: ['新手友好', '教育资源丰富', '最低入金门槛', '详细指南和教程'],
                suitable: '初学者',
                colorClass: 'bg-success'
            },
            'baidu': {
                advantages: ['推荐平台', '可靠稳定', '专业支持', '完善的功能'],
                suitable: '所有交易者',
                colorClass: 'bg-warning'
            }
        };

        const ComparisonPage = {
            async init() {
                await this.loadComparisonData();
            },

            async loadComparisonData() {
                try {
                    // Use skipCache to ensure we get fresh data
                    const response = await apiClient.request('GET', '/platforms?limit=100', { skipCache: true });
                    const platforms = response.data || response.items || response;
                    
                    console.log('Loaded platforms:', platforms);
                    console.log('Number of platforms:', platforms.length);
                    
                    this.renderComparisonTable(platforms);
                    this.renderDetailedComparison(platforms);
                } catch (error) {
                    console.error('Failed to load comparison data:', error);
                    this.showError('加载对比数据失败');
                }
            },

            renderComparisonTable(platforms) {
                const tableBody = document.getElementById('comparison-table-body');
                if (!tableBody) return;

                tableBody.innerHTML = platforms.map(platform => {
                    const leverage = platform.max_leverage || '未公开';
                    const feeRate = platform.fee_rate ? `${platform.fee_rate}%` : '未公开';
                    const minDeposit = platform.min_deposit ? `$${platform.min_deposit.toLocaleString()}` : '未公开';
                    const safetyRating = platform.safety_rating || 'B';
                    const badgeColor = platform.safety_rating === 'A+' || platform.safety_rating === 'A' ? 'bg-success' : 
                                       platform.safety_rating === 'B+' ? 'bg-warning' : 'bg-secondary';

                    return `
                        <tr>
                            <td><strong>${this.escapeHtml(platform.name)}</strong></td>
                            <td><span class="badge ${badgeColor}">1:${leverage}</span></td>
                            <td>${this.escapeHtml(feeRate)}</td>
                            <td>${this.escapeHtml(minDeposit)}</td>
                            <td><span class="text-success fw-bold">${this.escapeHtml(safetyRating)}</span></td>
                            <td><a href="/platforms/${platform.slug || platform.id}/" class="btn btn-sm btn-outline-primary">查看</a></td>
                        </tr>
                    `;
                }).join('');
            },

            renderDetailedComparison(platforms) {
                const container = document.getElementById('detailed-comparison-container');
                if (!container) return;

                container.innerHTML = platforms.map((platform, index) => {
                    const slug = (platform.slug || platform.id || '').toLowerCase();
                    const features = platformFeatures[slug] || {
                        advantages: ['专业交易平台', '完善的功能', '优秀的支持'],
                        suitable: '所有交易者',
                        colorClass: 'bg-secondary'
                    };

                    const advantages = features.advantages.map(adv => 
                        `<li class="ms-3 mb-2">✓ ${this.escapeHtml(adv)}</li>`
                    ).join('');

                    return `
                        <div class="col-lg-6">
                            <div class="card">
                                <div class="card-header text-white" style="background-color: #${this.getColorHex(features.colorClass)};">
                                    <h3 class="card-title h5 mb-0">${this.escapeHtml(platform.name)}</h3>
                                </div>
                                <div class="card-body">
                                    <ul class="list-unstyled">
                                        <li class="mb-2"><strong>优势:</strong></li>
                                        ${advantages}
                                        <li class="mt-3"><strong>适合:</strong> ${this.escapeHtml(features.suitable)}</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
            },

            getColorHex(colorClass) {
                const colorMap = {
                    'bg-primary': '0d6efd',
                    'bg-info': '0dcaf0',
                    'bg-success': '198754',
                    'bg-warning': 'ffc107',
                    'bg-secondary': '6c757d'
                };
                return colorMap[colorClass] || '0d6efd';
            },

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            },

            showError(message) {
                const container = document.getElementById('comparison-table-body');
                if (container) {
                    container.innerHTML = `
                        <tr>
                            <td colspan="6" class="text-center text-danger py-4">
                                ${this.escapeHtml(message)}
                            </td>
                        </tr>
                    `;
                }
            }
        };

        // 页面加载完毕后加载对比数据
        document.addEventListener('DOMContentLoaded', () => ComparisonPage.init());
    </script>
    
    <!-- Main Script -->
    <script src="/assets/js/main.js" defer></script>
    <!-- Site Settings Loader -->
    <script src="/assets/js/site-settings.js" defer></script>
</body>
</html>

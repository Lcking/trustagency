<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- Primary Meta Tags (will be updated by JS) -->
    <title>ä¸ªè‚¡ä¸¤èæ•°æ®æŸ¥è¯¢ | é¹°çœ¼æŸ¥è</title>
    <meta name="description" content="æŸ¥è¯¢Aè‚¡ä¸ªè‚¡èèµ„èåˆ¸å†å²æ•°æ®ï¼ŒåŒ…å«èèµ„ä½™é¢ã€èåˆ¸ä½™é‡ã€èèµ„å‡€ä¹°å…¥ç­‰æŒ‡æ ‡è¶‹åŠ¿åˆ†æã€‚">
    <meta name="keywords" content="ä¸ªè‚¡ä¸¤è,èèµ„èåˆ¸æŸ¥è¯¢,èèµ„ä½™é¢æŸ¥è¯¢,èåˆ¸ä½™é‡,è‚¡ç¥¨ä¸¤èæ•°æ®">
    <meta name="robots" content="index, follow">
    <meta name="author" content="é¹°çœ¼æŸ¥è">
    
    <!-- Canonical -->
    <link rel="canonical" href="https://www.yycr.net/margin/stock/">
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    
    <!-- Main Stylesheet -->
    <link href="/assets/css/main.css" rel="stylesheet">
    <link href="/assets/css/utilities.css" rel="stylesheet">
    
    <style>
        .stock-header {
            background: linear-gradient(135deg, var(--primary-color, #0d6efd) 0%, #0b5ed7 100%);
            color: white;
            padding: 2rem 0;
        }
        .stock-name {
            font-size: 2rem;
            font-weight: 700;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        .stock-code {
            color: rgba(255,255,255,0.9);
            font-size: 1.1rem;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }
        
        .stat-box {
            background: white;
            border-radius: 12px;
            padding: 1.25rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            text-align: center;
        }
        .stat-box .value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #212529;
        }
        .stat-box .label {
            font-size: 0.85rem;
            color: #6c757d;
            margin-top: 0.25rem;
        }
        .stat-box.positive .value { color: #28a745; }
        .stat-box.negative .value { color: #dc3545; }
        
        .chart-container {
            background: white;
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }
        
        .data-table {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }
        .data-table th {
            background: #f8f9fa;
            font-weight: 600;
            white-space: nowrap;
        }
        .data-table td {
            white-space: nowrap;
        }
        
        .search-box {
            background: rgba(255,255,255,0.1);
            border-radius: 50px;
            padding: 0.5rem 1rem;
        }
        .search-box input {
            background: transparent;
            border: none;
            outline: none;
            color: white;
            width: 100%;
        }
        .search-box input::placeholder {
            color: rgba(255,255,255,0.6);
        }
        
        .value-positive { color: #28a745; }
        .value-negative { color: #dc3545; }
    </style>
</head>
<body>
    
    <!-- Header / Navigation -->
    <header role="banner">
        <nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" role="navigation" aria-label="ä¸»å¯¼èˆª">
            <div class="container">
                <a class="navbar-brand fw-bold" href="/" aria-label="é¹°çœ¼æŸ¥èé¦–é¡µ">
                    <img src="/assets/images/logo.png" alt="é¹°çœ¼æŸ¥è" class="navbar-logo">
                    <span>é¹°çœ¼</span><span class="d-none d-sm-inline">æŸ¥è</span>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="åˆ‡æ¢å¯¼èˆªèœå•">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item"><a class="nav-link" href="/">é¦–é¡µ</a></li>
                        <li class="nav-item"><a class="nav-link active" href="/margin/">ä¸¤è</a></li>
                        <li class="nav-item"><a class="nav-link" href="/platforms/">å¹³å°</a></li>
                        <li class="nav-item"><a class="nav-link" href="/compare/">å¯¹æ¯”</a></li>
                        <li class="nav-item"><a class="nav-link" href="/qa/">å¸¸è§é—®é¢˜</a></li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarResources" role="button" data-bs-toggle="dropdown" aria-expanded="false">èµ„æº</a>
                            <ul class="dropdown-menu" aria-labelledby="navbarResources">
                                <li><a class="dropdown-item" href="/wiki/">ç™¾ç§‘</a></li>
                                <li><a class="dropdown-item" href="/guides/">æŒ‡å—</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="/about/">å…³äº</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- Breadcrumb Navigation -->
    <nav aria-label="breadcrumb" class="d-none d-md-block bg-light border-bottom py-2">
        <div class="container">
            <ol class="breadcrumb mb-0">
                <li class="breadcrumb-item"><a href="/">é¦–é¡µ</a></li>
                <li class="breadcrumb-item"><a href="/margin/">ä¸¤èæ•°æ®</a></li>
                <li class="breadcrumb-item active" aria-current="page" id="breadcrumb-stock">ä¸ªè‚¡æŸ¥è¯¢</li>
            </ol>
        </div>
    </nav>

    <!-- Main Content -->
    <main role="main" id="main-content">
        <!-- Stock Header -->
        <section class="stock-header" id="stock-header">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-8">
                        <h1 class="stock-name" id="stock-name">åŠ è½½ä¸­...</h1>
                        <p class="stock-code mb-3" id="stock-code">--</p>
                        <div class="d-flex gap-3 flex-wrap" id="stock-tags">
                            <span class="badge bg-primary">ä¸¤èæ ‡çš„</span>
                        </div>
                    </div>
                    <div class="col-lg-4 mt-3 mt-lg-0">
                        <div class="search-box d-flex align-items-center">
                            <span class="me-2">ğŸ”</span>
                            <input type="text" id="stockSearch" placeholder="æœç´¢å…¶ä»–è‚¡ç¥¨..." class="flex-grow-1">
                            <button class="btn btn-light btn-sm rounded-pill px-3" onclick="searchStock()">æœç´¢</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- æœ€æ–°æ•°æ®æ¦‚è§ˆ -->
        <section class="py-4" style="margin-top: -2rem;">
            <div class="container">
                <div class="row g-3" id="latest-stats">
                    <div class="col-6 col-md-4 col-lg-2">
                        <div class="stat-box">
                            <div class="value" id="stat-rzye">--</div>
                            <div class="label">èèµ„ä½™é¢</div>
                        </div>
                    </div>
                    <div class="col-6 col-md-4 col-lg-2">
                        <div class="stat-box" id="stat-net-box">
                            <div class="value" id="stat-net-buy">--</div>
                            <div class="label">èèµ„å‡€ä¹°å…¥</div>
                        </div>
                    </div>
                    <div class="col-6 col-md-4 col-lg-2">
                        <div class="stat-box">
                            <div class="value" id="stat-rzmre">--</div>
                            <div class="label">èèµ„ä¹°å…¥é¢</div>
                        </div>
                    </div>
                    <div class="col-6 col-md-4 col-lg-2">
                        <div class="stat-box">
                            <div class="value" id="stat-rqyl">--</div>
                            <div class="label">èåˆ¸ä½™é‡</div>
                        </div>
                    </div>
                    <div class="col-6 col-md-4 col-lg-2">
                        <div class="stat-box">
                            <div class="value" id="stat-rqye">--</div>
                            <div class="label">èåˆ¸ä½™é¢</div>
                        </div>
                    </div>
                    <div class="col-6 col-md-4 col-lg-2">
                        <div class="stat-box">
                            <div class="value" id="stat-rzrqye">--</div>
                            <div class="label">ä¸¤èä½™é¢</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- è¶‹åŠ¿å›¾è¡¨ -->
        <section class="py-4">
            <div class="container">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h2 class="h4 mb-0">ğŸ“ˆ ä¸¤èè¶‹åŠ¿</h2>
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-outline-primary btn-sm" onclick="loadHistory(30)">30å¤©</button>
                        <button type="button" class="btn btn-primary btn-sm active" onclick="loadHistory(90)">90å¤©</button>
                        <button type="button" class="btn btn-outline-primary btn-sm" onclick="loadHistory(180)">180å¤©</button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="historyChart" height="350"></canvas>
                </div>
            </div>
        </section>

        <!-- å†å²æ•°æ®è¡¨æ ¼ -->
        <section class="py-4 bg-light">
            <div class="container">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h2 class="h4 mb-0">ğŸ“‹ å†å²æ•°æ®æ˜ç»†</h2>
                    <button class="btn btn-outline-primary btn-sm" onclick="exportData()">
                        ğŸ“¥ å¯¼å‡ºExcel
                    </button>
                </div>
                <div class="data-table">
                    <div class="table-responsive">
                        <table class="table table-hover mb-0">
                            <thead>
                                <tr>
                                    <th>æ—¥æœŸ</th>
                                    <th class="text-end">èèµ„ä½™é¢</th>
                                    <th class="text-end">èèµ„ä¹°å…¥</th>
                                    <th class="text-end">èèµ„å¿è¿˜</th>
                                    <th class="text-end">å‡€ä¹°å…¥</th>
                                    <th class="text-end">èåˆ¸ä½™é‡</th>
                                    <th class="text-end">èåˆ¸ä½™é¢</th>
                                </tr>
                            </thead>
                            <tbody id="history-table">
                                <tr><td colspan="7" class="text-center py-4"><div class="spinner-border spinner-border-sm text-primary"></div> åŠ è½½ä¸­...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-dark text-white py-5" role="contentinfo">
        <div class="container">
            <div class="row g-4">
                <div class="col-md-4">
                    <h3 class="h6 mb-3">å…³äºæˆ‘ä»¬</h3>
                    <p class="small text-muted">é¹°çœ¼æŸ¥èä¸ºæŠ•èµ„è€…æä¾›ä¸“ä¸šçš„ä¸¤èæ•°æ®å’Œæ æ†å¹³å°ä¿¡æ¯æœåŠ¡ã€‚</p>
                </div>
                <div class="col-md-4">
                    <h3 class="h6 mb-3">å¿«é€Ÿé“¾æ¥</h3>
                    <ul class="list-unstyled small">
                        <li><a href="/margin/" class="text-decoration-none text-muted">ä¸¤èæ•°æ®</a></li>
                        <li><a href="/platforms/" class="text-decoration-none text-muted">å¹³å°åˆ—è¡¨</a></li>
                        <li><a href="/about/" class="text-decoration-none text-muted">å…³äºæˆ‘ä»¬</a></li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <h3 class="h6 mb-3">è”ç³»æˆ‘ä»¬</h3>
                    <p class="small text-muted">Email: <a href="mailto:support@yycr.net" class="text-muted">support@yycr.net</a></p>
                </div>
            </div>
            <hr class="border-secondary my-4">
            <div class="text-center small text-muted">Â© 2025 ä¸Šæµ·è–é›…å¾ä¿¡ã€‚ç‰ˆæƒæ‰€æœ‰ã€‚</div>
        </div>
    </footer>

    <!-- Bootstrap 5 Bundle JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    
    <script>
        // API åŸºç¡€URL - ä½¿ç”¨ nullish coalescing ç¡®ä¿ç©ºå­—ç¬¦ä¸²ä¹Ÿèƒ½æ­£ç¡®å¤„ç†
        const configuredBase = window.API_BASE ?? '';
        const API_BASE = configuredBase !== ''
            ? configuredBase
            : (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'
                ? 'http://localhost:8001'
                : '');
        
        let currentCode = '';
        let historyData = [];
        let historyChart = null;
        
        // æ ¼å¼åŒ–é‡‘é¢ - ä½¿ç”¨æ˜¾å¼ null/undefined æ£€æŸ¥
        function formatAmount(value) {
            if (value === null || value === undefined) return '--';
            const yi = value / 1e8;
            if (Math.abs(yi) >= 10000) {
                return (yi / 10000).toFixed(2) + 'ä¸‡äº¿';
            }
            return yi.toFixed(2) + 'äº¿';
        }
        
        // æ ¼å¼åŒ–è‚¡æ•° - ä½¿ç”¨æ˜¾å¼ null/undefined æ£€æŸ¥
        function formatVolume(value) {
            if (value === null || value === undefined) return '--';
            const wan = value / 10000;
            if (Math.abs(wan) >= 10000) {
                return (wan / 10000).toFixed(2) + 'äº¿è‚¡';
            }
            return wan.toFixed(0) + 'ä¸‡è‚¡';
        }
        
        // è·å–URLå‚æ•°
        function getUrlParam(name) {
            // é¦–å…ˆå°è¯•ä»æŸ¥è¯¢å‚æ•°è·å–
            const params = new URLSearchParams(window.location.search);
            const queryValue = params.get(name);
            if (queryValue) return queryValue;
            
            // SEOå‹å¥½æ ¼å¼: /margin/stock/600519/ æˆ– /margin/stock/600519.SH/
            if (name === 'code') {
                const pathMatch = window.location.pathname.match(/\/margin\/stock\/([0-9]{6}(?:\.[A-Z]{2})?)\/?$/);
                if (pathMatch) return pathMatch[1];
            }
            return null;
        }
        
        // è§„èŒƒåŒ–è‚¡ç¥¨ä»£ç 
        function normalizeCode(code) {
            if (!code) return '';
            code = code.toUpperCase().trim();
            if (code.includes('.')) return code;
            if (code.startsWith('6')) return code + '.SH';
            if (code.startsWith('0') || code.startsWith('3')) return code + '.SZ';
            if (code.startsWith('8') || code.startsWith('4')) return code + '.BJ';
            return code;
        }
        
        // åŠ è½½è‚¡ç¥¨æ•°æ®
        async function loadStockData(code, days = 90) {
            currentCode = normalizeCode(code);
            
            if (!currentCode) {
                document.getElementById('stock-name').textContent = 'è¯·è¾“å…¥è‚¡ç¥¨ä»£ç ';
                return;
            }
            
            try {
                const response = await fetch(`${API_BASE}/api/margin/stock/${currentCode}?days=${days}`);
                if (!response.ok) {
                    throw new Error('æœªæ‰¾åˆ°è¯¥è‚¡ç¥¨çš„ä¸¤èæ•°æ®');
                }
                const data = await response.json();
                
                historyData = data.data;
                
                // æ›´æ–°é¡µé¢æ ‡é¢˜
                const stockName = data.name || currentCode.split('.')[0];
                document.title = `${stockName}(${currentCode})ä¸¤èæ•°æ® | é¹°çœ¼æŸ¥è`;
                document.getElementById('stock-name').textContent = stockName;
                document.getElementById('stock-code').textContent = currentCode;
                document.getElementById('breadcrumb-stock').textContent = `${stockName}(${currentCode.split('.')[0]})`;
                
                // æ›´æ–°æœ€æ–°æ•°æ®
                if (historyData.length > 0) {
                    const latest = historyData[historyData.length - 1];
                    document.getElementById('stat-rzye').textContent = formatAmount(latest.rzye);
                    document.getElementById('stat-rzmre').textContent = formatAmount(latest.rzmre);
                    document.getElementById('stat-rqyl').textContent = formatVolume(latest.rqyl);
                    document.getElementById('stat-rqye').textContent = formatAmount(latest.rqye);
                    document.getElementById('stat-rzrqye').textContent = formatAmount(latest.rzrqye);
                    
                    const netBuy = latest.net_buy;
                    document.getElementById('stat-net-buy').textContent = (netBuy >= 0 ? '+' : '') + formatAmount(netBuy);
                    const netBox = document.getElementById('stat-net-box');
                    netBox.classList.remove('positive', 'negative');
                    netBox.classList.add(netBuy >= 0 ? 'positive' : 'negative');
                }
                
                // æ¸²æŸ“å›¾è¡¨
                renderChart(historyData);
                
                // æ¸²æŸ“è¡¨æ ¼
                renderTable(historyData);
                
            } catch (error) {
                console.error('åŠ è½½å¤±è´¥:', error);
                document.getElementById('stock-name').textContent = error.message;
                document.getElementById('history-table').innerHTML = 
                    `<tr><td colspan="7" class="text-center py-4 text-danger">${error.message}</td></tr>`;
            }
        }
        
        // æ¸²æŸ“å›¾è¡¨
        function renderChart(data) {
            const ctx = document.getElementById('historyChart').getContext('2d');
            
            if (historyChart) {
                historyChart.destroy();
            }
            
            const labels = data.map(d => d.date.slice(5));
            const rzye = data.map(d => d.rzye / 1e8);
            const netBuy = data.map(d => d.net_buy / 1e8);
            const rqyl = data.map(d => d.rqyl / 10000);
            
            historyChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'èèµ„ä½™é¢(äº¿)',
                            data: rzye,
                            borderColor: '#f5576c',
                            backgroundColor: 'rgba(245, 87, 108, 0.1)',
                            fill: true,
                            tension: 0.4,
                            yAxisID: 'y'
                        },
                        {
                            label: 'èèµ„å‡€ä¹°å…¥(äº¿)',
                            data: netBuy,
                            borderColor: '#43e97b',
                            backgroundColor: 'rgba(67, 233, 123, 0.3)',
                            fill: true,
                            tension: 0.4,
                            type: 'bar',
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false
                    },
                    plugins: {
                        legend: {
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'èèµ„ä½™é¢(äº¿)'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'å‡€ä¹°å…¥(äº¿)'
                            },
                            grid: {
                                drawOnChartArea: false
                            }
                        }
                    }
                }
            });
        }
        
        // æ¸²æŸ“è¡¨æ ¼
        function renderTable(data) {
            const container = document.getElementById('history-table');
            
            if (!data || data.length === 0) {
                container.innerHTML = '<tr><td colspan="7" class="text-center py-4 text-muted">æš‚æ— æ•°æ®</td></tr>';
                return;
            }
            
            // å€’åºæ˜¾ç¤ºï¼ˆæœ€æ–°çš„åœ¨å‰ï¼‰
            const reversed = [...data].reverse();
            
            container.innerHTML = reversed.slice(0, 30).map(item => {
                const netClass = item.net_buy >= 0 ? 'value-positive' : 'value-negative';
                const netSign = item.net_buy >= 0 ? '+' : '';
                return `
                    <tr>
                        <td>${item.date}</td>
                        <td class="text-end">${formatAmount(item.rzye)}</td>
                        <td class="text-end">${formatAmount(item.rzmre)}</td>
                        <td class="text-end">${formatAmount(item.rzche)}</td>
                        <td class="text-end ${netClass}">${netSign}${formatAmount(item.net_buy)}</td>
                        <td class="text-end">${formatVolume(item.rqyl)}</td>
                        <td class="text-end">${formatAmount(item.rqye)}</td>
                    </tr>
                `;
            }).join('');
        }
        
        // åŠ è½½å†å²ï¼ˆåˆ‡æ¢å¤©æ•°ï¼‰
        function loadHistory(days) {
            loadStockData(currentCode, days);
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('[onclick^="loadHistory"]').forEach(btn => {
                btn.classList.remove('btn-primary', 'active');
                btn.classList.add('btn-outline-primary');
                // æ£€æŸ¥æŒ‰é’®å¯¹åº”çš„å¤©æ•°
                const btnDays = btn.getAttribute('onclick').match(/loadHistory\((\d+)\)/);
                if (btnDays && parseInt(btnDays[1]) === days) {
                    btn.classList.remove('btn-outline-primary');
                    btn.classList.add('btn-primary', 'active');
                }
            });
        }
        
        // æœç´¢è‚¡ç¥¨
        function searchStock() {
            const keyword = document.getElementById('stockSearch').value.trim();
            if (keyword) {
                const code = normalizeCode(keyword);
                window.location.href = `/margin/stock/${encodeURIComponent(code)}/`;
            }
        }
        
        // å¯¼å‡ºæ•°æ®
        function exportData() {
            if (!historyData || historyData.length === 0) {
                alert('æš‚æ— æ•°æ®å¯å¯¼å‡º');
                return;
            }
            
            // ç”ŸæˆCSV
            const headers = ['æ—¥æœŸ', 'èèµ„ä½™é¢', 'èèµ„ä¹°å…¥', 'èèµ„å¿è¿˜', 'å‡€ä¹°å…¥', 'èåˆ¸ä½™é‡', 'èåˆ¸ä½™é¢', 'ä¸¤èä½™é¢'];
            const rows = historyData.map(d => [
                d.date,
                d.rzye,
                d.rzmre,
                d.rzche,
                d.net_buy,
                d.rqyl,
                d.rqye,
                d.rzrqye
            ]);
            
            let csv = '\uFEFF' + headers.join(',') + '\n';
            rows.forEach(row => {
                csv += row.join(',') + '\n';
            });
            
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            // æ–‡ä»¶åä¸­æ›¿æ¢ç‚¹å·é¿å…åŒæ‰©å±•åé—®é¢˜
            link.download = `${String(currentCode).replace(/\./g, '_')}_margin_data.csv`;
            link.click();
        }
        
        // å›è½¦æœç´¢
        document.getElementById('stockSearch').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') searchStock();
        });
        
        // é¡µé¢åŠ è½½
        document.addEventListener('DOMContentLoaded', function() {
            const code = getUrlParam('code');
            if (code) {
                loadStockData(code, 90);
            } else {
                document.getElementById('stock-name').textContent = 'è¯·è¾“å…¥è‚¡ç¥¨ä»£ç ';
                document.getElementById('history-table').innerHTML = 
                    '<tr><td colspan="7" class="text-center py-4 text-muted">åœ¨æœç´¢æ¡†ä¸­è¾“å…¥è‚¡ç¥¨ä»£ç æˆ–åç§°è¿›è¡ŒæŸ¥è¯¢</td></tr>';
            }
        });
    </script>
</body>
</html>

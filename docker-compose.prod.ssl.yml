# Docker Compose SSL Override for Production
# 
# Usage (after setting up SSL certificates):
#   docker-compose -f docker-compose.prod.yml -f docker-compose.prod.ssl.yml up -d
#
# Prerequisites:
#   1. Obtain certificates via Let's Encrypt:
#      certbot certonly --standalone -d yycr.net -d www.yycr.net
#
#   2. Set up automatic renewal cron job:
#      (crontab -l 2>/dev/null; echo "0 3 * * * certbot renew --quiet && docker-compose -f /opt/trustagency/docker-compose.prod.yml -f /opt/trustagency/docker-compose.prod.ssl.yml restart frontend") | crontab -
#
# Note: Certificates are mounted directly from Let's Encrypt directory
#       and will automatically use renewed certificates after container restart.

version: '3.8'

services:
  frontend:
    volumes:
      # Override: Use SSL-enabled nginx config
      - ./nginx/ssl.conf:/etc/nginx/conf.d/default.conf:ro
      # Security headers (required by location blocks)
      - ./nginx/security-headers.conf:/etc/nginx/conf.d/security-headers.conf:ro
      # Mount Let's Encrypt directory directly (auto-renewal friendly)
      - /etc/letsencrypt:/etc/letsencrypt:ro


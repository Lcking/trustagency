<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- Primary Meta Tags (SSR ä¼šæ›¿æ¢) -->
    <title>åŠ è½½ä¸­... - è‚¡ç¥¨æ æ†å¹³å°æ’è¡Œæ¦œå•</title>
    <meta id="seo-description" name="description" content="ä¸“ä¸šçš„è‚¡ç¥¨æ æ†äº¤æ˜“å¹³å°è¯¦æƒ…é¡µ">
    <meta id="seo-keywords" name="keywords" content="æ æ†äº¤æ˜“,äº¤æ˜“å¹³å°">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph -->
    <meta id="og-title" property="og:title" content="è‚¡ç¥¨æ æ†å¹³å°æ’è¡Œæ¦œå•">
    <meta id="og-description" property="og:description" content="ä¸“ä¸šçš„è‚¡ç¥¨æ æ†äº¤æ˜“å¹³å°è¯¦æƒ…é¡µ">
    <meta id="og-url" property="og:url" content="https://www.yycr.net/platforms/">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="è‚¡ç¥¨æ æ†å¹³å°æ’è¡Œæ¦œå•">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta id="twitter-title" name="twitter:title" content="è‚¡ç¥¨æ æ†å¹³å°æ’è¡Œæ¦œå•">
    <meta id="twitter-description" name="twitter:description" content="ä¸“ä¸šçš„è‚¡ç¥¨æ æ†äº¤æ˜“å¹³å°è¯¦æƒ…é¡µ">
    
    <!-- Canonical -->
    <link id="canonical" rel="canonical" href="https://www.yycr.net/platforms/">
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    
    <!-- Main Stylesheet -->
    <link href="/assets/css/main.css" rel="stylesheet">
    <link href="/assets/css/utilities.css" rel="stylesheet">
    
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; }
        .border-left { border-left: 4px solid #198754 !important; }
        .card-feature { transition: transform 0.2s, box-shadow 0.2s; }
        .card-feature:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .step-number { width: 60px; height: 60px; font-size: 2rem; font-weight: bold; display: flex; align-items: center; justify-content: center; border-radius: 50%; margin: 0 auto 1rem; }
        .cta-button { font-size: 1.1rem; padding: 12px 32px; }
        .sidebar-cta { position: sticky; top: 20px; z-index: 100; }
    </style>
</head>
<body>
    <!-- Header / Navigation -->
    <header role="banner">
        <nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom" role="navigation" aria-label="ä¸»å¯¼èˆª">
            <div class="container">
                <a class="navbar-brand fw-bold" href="/" aria-label="è‚¡ç¥¨æ æ†å¹³å°æ’è¡Œæ¦œå•é¦–é¡µ">
                    <span>è‚¡ç¥¨æ æ†</span><span class="d-none d-sm-inline">å¹³å°æ’è¡Œæ¦œå•</span>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="åˆ‡æ¢å¯¼èˆªèœå•">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item"><a class="nav-link" href="/">é¦–é¡µ</a></li>
                        <li class="nav-item"><a class="nav-link active" href="/platforms/">å¹³å°</a></li>
                        <li class="nav-item"><a class="nav-link" href="/compare/">å¯¹æ¯”</a></li>
                        <li class="nav-item"><a class="nav-link" href="/qa/">å¸¸è§é—®é¢˜</a></li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarResources" role="button" data-bs-toggle="dropdown" aria-expanded="false">èµ„æº</a>
                            <ul class="dropdown-menu" aria-labelledby="navbarResources">
                                <li><a class="dropdown-item" href="/wiki/">ç™¾ç§‘</a></li>
                                <li><a class="dropdown-item" href="/guides/">æŒ‡å—</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="/about/">å…³äº</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- Breadcrumb Navigation -->
    <nav aria-label="breadcrumb" class="d-none d-md-block bg-light border-bottom py-2">
        <div class="container">
            <ol class="breadcrumb mb-0">
                <li class="breadcrumb-item"><a href="/">é¦–é¡µ</a></li>
                <li class="breadcrumb-item"><a href="/platforms/">å¹³å°</a></li>
                <li class="breadcrumb-item active" aria-current="page" id="breadcrumb-name">åŠ è½½ä¸­...</li>
            </ol>
        </div>
    </nav>

    <!-- Main Content -->
    <main role="main" id="main-content" class="py-5">
        <div class="container">
            <div id="platform-container">
                <!-- åŠ è½½çŠ¶æ€ -->
                <div id="loading-state" class="text-center py-5">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">åŠ è½½ä¸­...</span>
                    </div>
                    <p class="mt-3 text-muted">æ­£åœ¨åŠ è½½å¹³å°ä¿¡æ¯...</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-dark text-white py-5 mt-5" role="contentinfo" aria-label="é¡µè„š">
        <div class="container">
            <div class="row g-4">
                <div class="col-md-4">
                    <h3 class="h6 mb-3">å…³äºæˆ‘ä»¬</h3>
                    <p class="small text-muted">ä¸ºæŠ•èµ„è€…æä¾›ä¸“ä¸šã€é€æ˜çš„æ æ†å¹³å°ä¿¡æ¯å’Œäº¤æ˜“æŒ‡å—ã€‚</p>
                </div>
                <div class="col-md-4">
                    <h3 class="h6 mb-3">å¿«é€Ÿé“¾æ¥</h3>
                    <ul class="list-unstyled small">
                        <li><a href="/platforms/" class="text-decoration-none text-muted">å¹³å°åˆ—è¡¨</a></li>
                        <li><a href="/compare/" class="text-decoration-none text-muted">å¹³å°å¯¹æ¯”</a></li>
                        <li><a href="/about/" class="text-decoration-none text-muted">å…³äºæˆ‘ä»¬</a></li>
                        <li><a href="/legal/" class="text-decoration-none text-muted">æ³•å¾‹å£°æ˜</a></li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <h3 class="h6 mb-3">è”ç³»æˆ‘ä»¬</h3>
                    <p class="small text-muted mb-0">Email: <a href="mailto:support@yycr.net" class="text-decoration-none text-muted">support@yycr.net</a></p>
                </div>
            </div>
            <hr class="border-secondary my-4">
            <div class="text-center small text-muted">
                <p class="mb-1">Â© 2025 è‚¡ç¥¨æ æ†å¹³å°æ’è¡Œæ¦œå•ã€‚ç‰ˆæƒæ‰€æœ‰ã€‚</p>
                <p class="mb-0">
                    <a href="/legal/" class="text-decoration-none text-muted">æ³•å¾‹å£°æ˜</a> | 
                    <a href="/legal/#disclaimer" class="text-decoration-none text-muted">é£é™©å£°æ˜</a>
                </p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap 5 Bundle JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    
    <script>
    const API_URL = location.origin.replace(/\/$/, '');
    const siteName = 'è‚¡ç¥¨æ æ†å¹³å°æ’è¡Œæ¦œå•';
    
    // SSR æ•°æ®ï¼ˆåç«¯ä¼šæ³¨å…¥ï¼‰
    let platformData = window.__PLATFORM_DATA__ || null;
    
    // å·¥å…·å‡½æ•°
    function escapeHtml(text) {
        if (!text) return '';
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }
    
    // ç”¨äº HTML å±æ€§å€¼çš„è½¬ä¹‰ï¼ˆé¢å¤–è½¬ä¹‰åŒå¼•å·å’Œå•å¼•å·ï¼‰
    function escapeAttr(text) {
        if (!text) return '';
        return escapeHtml(text)
            .replace(/"/g, '&quot;')
            .replace(/'/g, '&#39;');
    }
    
    // æ™ºèƒ½è§£æï¼šæ”¯æŒ JSON æ•°ç»„æˆ–æ™®é€šæ–‡æœ¬
    function parseJSON(str, fallback = []) {
        if (!str) return fallback;
        const trimmed = str.trim();
        // å¦‚æœä»¥ [ å¼€å¤´ï¼Œå°è¯•è§£æä¸º JSON æ•°ç»„
        if (trimmed.startsWith('[')) {
            try {
                const result = JSON.parse(trimmed);
                return Array.isArray(result) ? result : fallback;
            } catch (e) {
                return fallback;
            }
        }
        return fallback; // ä¸æ˜¯ JSON æ•°ç»„ï¼Œè¿”å›ç©ºæ•°ç»„
    }
    
    // æ£€æŸ¥å­—æ®µæ˜¯å¦ä¸ºæ™®é€šæ–‡æœ¬ï¼ˆé JSONï¼‰
    function isPlainText(str) {
        if (!str) return false;
        const trimmed = str.trim();
        return trimmed.length > 0 && !trimmed.startsWith('[') && !trimmed.startsWith('{');
    }
    
    // å°†æ™®é€šæ–‡æœ¬æŒ‰è¡Œåˆ†å‰²æˆæ•°ç»„
    function textToList(str) {
        if (!str) return [];
        return str.split(/[\n,ï¼Œã€;ï¼›]+/).map(s => s.trim()).filter(s => s.length > 0);
    }
    
    function createStars(rating) {
        const r = parseFloat(rating) || 0;
        const full = Math.floor(r);
        const half = r % 1 >= 0.5;
        let stars = '';
        for (let i = 0; i < 5; i++) {
            if (i < full) stars += 'â˜…';
            else if (i === full && half) stars += 'â—†';
            else stars += 'â˜†';
        }
        return stars;
    }
    
    // ä¸»æ¸²æŸ“å‡½æ•°
    function renderPlatform(platform) {
        const p = platform;
        
        // è§£æå„å­—æ®µ - æ”¯æŒ JSON æ•°ç»„æˆ–æ™®é€šæ–‡æœ¬
        const badges = parseJSON(p.platform_badges);
        const whyChoose = parseJSON(p.why_choose);
        const tradingConditions = parseJSON(p.trading_conditions);
        const feeAdvantages = parseJSON(p.fee_advantages);
        const accountTypes = parseJSON(p.account_types);
        const learningResources = parseJSON(p.learning_resources);
        const openingSteps = parseJSON(p.opening_steps);
        const securityMeasures = parseJSON(p.security_measures);
        const customerSupport = parseJSON(p.customer_support);
        
        // æ£€æŸ¥å“ªäº›å­—æ®µæ˜¯æ™®é€šæ–‡æœ¬ï¼ˆé JSONï¼‰
        const hasPlainWhyChoose = isPlainText(p.why_choose);
        const hasPlainTradingConditions = isPlainText(p.trading_conditions);
        const hasPlainFeeAdvantages = isPlainText(p.fee_advantages);
        const hasPlainAccountTypes = isPlainText(p.account_types);
        const hasPlainLearningResources = isPlainText(p.learning_resources);
        const hasPlainOpeningSteps = isPlainText(p.opening_steps);
        const hasPlainSecurityMeasures = isPlainText(p.security_measures);
        const hasPlainCustomerSupport = isPlainText(p.customer_support);
        const hasPlainBadges = isPlainText(p.platform_badges);
        
        // å°†æ™®é€šæ–‡æœ¬è½¬æ¢ä¸ºåˆ—è¡¨ï¼ˆç”¨äºç®€å•æ˜¾ç¤ºï¼‰
        const plainWhyChooseList = textToList(p.why_choose);
        const plainTradingConditionsList = textToList(p.trading_conditions);
        const plainFeeAdvantagesList = textToList(p.fee_advantages);
        const plainOpeningStepsList = textToList(p.opening_steps);
        const plainSecurityMeasuresList = textToList(p.security_measures);
        const plainCustomerSupportList = textToList(p.customer_support);
        const plainBadgesList = textToList(p.platform_badges);
        
        // æ›´æ–°é¡µé¢å…ƒæ•°æ®
        document.title = `${p.name} - ${siteName}`;
        document.getElementById('breadcrumb-name').textContent = p.name;
        document.getElementById('seo-description').content = p.description || `${p.name} å¹³å°è¯¦æƒ…`;
        document.getElementById('og-title').content = `${p.name} - ${siteName}`;
        document.getElementById('og-description').content = p.description || '';
        document.getElementById('og-url').content = `https://www.yycr.net/platforms/${p.slug}/`;
        document.getElementById('twitter-title').content = `${p.name} - ${siteName}`;
        document.getElementById('twitter-description').content = p.description || '';
        document.getElementById('canonical').href = `https://www.yycr.net/platforms/${p.slug}/`;
        
        // æ„å»º HTML
        let html = `
        <div class="row g-5">
            <!-- ä¸»å†…å®¹åŒº -->
            <div class="col-lg-8">
                <!-- é¡µé¢æ ‡é¢˜ -->
                <section class="mb-5" aria-labelledby="page-title">
                    <div class="d-flex align-items-center gap-3 mb-3 flex-wrap">
                        <div>
                            <h1 id="page-title" class="display-5 fw-bold mb-2">${escapeHtml(p.name)}</h1>
                            <p class="lead text-muted mb-0">${escapeHtml(p.description || 'ä¸“ä¸šäº¤æ˜“å¹³å°')}</p>
                        </div>
                        ${badges.length > 0 ? badges.map(b => `<span class="badge bg-success">${escapeHtml(typeof b === 'string' ? b : b.text || b.name || '')}</span>`).join('') : (hasPlainBadges ? plainBadgesList.map(b => `<span class="badge bg-success">${escapeHtml(b)}</span>`).join('') : (p.platform_type ? `<span class="badge bg-success">${escapeHtml(p.platform_type)}</span>` : ''))}
                    </div>
                </section>
                
                <!-- å¹³å°æ¦‚è¿° -->
                ${p.introduction || p.overview_intro ? `
                <section class="mb-5" aria-labelledby="overview-title">
                    <h2 id="overview-title" class="h4 mb-3">å¹³å°æ¦‚è¿°</h2>
                    <div class="card border-left border-success">
                        <div class="card-body">
                            <p class="mb-0">${escapeHtml(p.introduction || p.overview_intro)}</p>
                        </div>
                    </div>
                </section>
                ` : ''}
                
                <!-- ä¸ºä»€ä¹ˆé€‰æ‹© -->
                ${whyChoose.length > 0 ? `
                <section class="mb-5" aria-labelledby="why-title">
                    <h2 id="why-title" class="h4 mb-3">ä¸ºä»€ä¹ˆé€‰æ‹© ${escapeHtml(p.name)}ï¼Ÿ</h2>
                    <div class="row g-3">
                        ${whyChoose.map(item => `
                        <div class="col-md-6">
                            <div class="card h-100 card-feature">
                                <div class="card-body">
                                    <h4 class="card-title h6">${escapeHtml(item.icon || 'âœ“')} ${escapeHtml(item.title || '')}</h4>
                                    <p class="card-text small text-muted mb-0">${escapeHtml(item.description || '')}</p>
                                </div>
                            </div>
                        </div>
                        `).join('')}
                    </div>
                </section>
                ` : (hasPlainWhyChoose ? `
                <section class="mb-5" aria-labelledby="why-title">
                    <h2 id="why-title" class="h4 mb-3">ä¸ºä»€ä¹ˆé€‰æ‹© ${escapeHtml(p.name)}ï¼Ÿ</h2>
                    <div class="row g-3">
                        ${plainWhyChooseList.map(item => `
                        <div class="col-md-6">
                            <div class="card h-100 card-feature">
                                <div class="card-body">
                                    <h4 class="card-title h6">âœ“ ${escapeHtml(item)}</h4>
                                </div>
                            </div>
                        </div>
                        `).join('')}
                    </div>
                </section>
                ` : '')}
                
                <!-- ä¸»è¦ç‰¹æ€§ï¼šäº¤æ˜“æ¡ä»¶ + è´¹ç”¨ä¼˜åŠ¿ -->
                ${tradingConditions.length > 0 || feeAdvantages.length > 0 || hasPlainTradingConditions || hasPlainFeeAdvantages ? `
                <section class="mb-5" aria-labelledby="features-title">
                    <h2 id="features-title" class="h4 mb-3">âœ¨ ä¸»è¦ç‰¹æ€§</h2>
                    ${tradingConditions.length > 0 ? `
                    <div class="card mb-3">
                        <div class="card-header bg-success text-white">
                            <h3 class="card-title h6 mb-0">äº¤æ˜“æ¡ä»¶</h3>
                        </div>
                        <ul class="list-group list-group-flush">
                            ${tradingConditions.map(item => `
                            <li class="list-group-item">âœ“ ${escapeHtml(item.label || item.title || '')}: ${escapeHtml(item.value || item.description || '')}</li>
                            `).join('')}
                        </ul>
                    </div>
                    ` : (hasPlainTradingConditions ? `
                    <div class="card mb-3">
                        <div class="card-header bg-success text-white">
                            <h3 class="card-title h6 mb-0">äº¤æ˜“æ¡ä»¶</h3>
                        </div>
                        <ul class="list-group list-group-flush">
                            ${plainTradingConditionsList.map(item => `<li class="list-group-item">âœ“ ${escapeHtml(item)}</li>`).join('')}
                        </ul>
                    </div>
                    ` : '')}
                    ${feeAdvantages.length > 0 ? `
                    <div class="card">
                        <div class="card-header bg-info text-white">
                            <h3 class="card-title h6 mb-0">è´¹ç”¨ä¼˜åŠ¿</h3>
                        </div>
                        <ul class="list-group list-group-flush">
                            ${feeAdvantages.map(item => `
                            <li class="list-group-item">âœ“ ${escapeHtml(item.label || item.title || '')}: ${escapeHtml(item.value || item.description || '')}</li>
                            `).join('')}
                        </ul>
                    </div>
                    ` : (hasPlainFeeAdvantages ? `
                    <div class="card">
                        <div class="card-header bg-info text-white">
                            <h3 class="card-title h6 mb-0">è´¹ç”¨ä¼˜åŠ¿</h3>
                        </div>
                        <ul class="list-group list-group-flush">
                            ${plainFeeAdvantagesList.map(item => `<li class="list-group-item">âœ“ ${escapeHtml(item)}</li>`).join('')}
                        </ul>
                    </div>
                    ` : '')}
                </section>
                ` : ''}
                
                <!-- å­¦ä¹ èµ„æºï¼ˆæ‰‹é£ç´æ ·å¼ï¼‰ -->
                ${learningResources.length > 0 ? `
                <section class="mb-5" aria-labelledby="learning-title">
                    <h2 id="learning-title" class="h4 mb-3">ğŸ“– å­¦ä¹ èµ„æº</h2>
                    <div class="accordion" id="learningAccordion">
                        ${learningResources.map((item, index) => `
                        <div class="accordion-item">
                            <h3 class="accordion-header">
                                <button class="accordion-button ${index > 0 ? 'collapsed' : ''}" type="button" data-bs-toggle="collapse" data-bs-target="#learning${index}">
                                    ${escapeHtml(item.title || item.name || `èµ„æº ${index + 1}`)}
                                </button>
                            </h3>
                            <div id="learning${index}" class="accordion-collapse collapse ${index === 0 ? 'show' : ''}" data-bs-parent="#learningAccordion">
                                <div class="accordion-body">
                                    ${item.items && Array.isArray(item.items) ? `
                                    <ul>
                                        ${item.items.map(i => `<li>${escapeHtml(i)}</li>`).join('')}
                                    </ul>
                                    ` : `<p>${escapeHtml(item.description || item.content || '')}</p>`}
                                </div>
                            </div>
                        </div>
                        `).join('')}
                    </div>
                </section>
                ` : ''}
                
                <!-- è´¦æˆ·ç±»å‹ï¼ˆè¡¨æ ¼æ ·å¼ï¼‰ -->
                ${accountTypes.length > 0 ? `
                <section class="mb-5" aria-labelledby="accounts-title">
                    <h2 id="accounts-title" class="h4 mb-3">ğŸ“Š è´¦æˆ·ç±»å‹</h2>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead class="table-light">
                                <tr>
                                    <th>è´¦æˆ·ç±»å‹</th>
                                    ${accountTypes.map(a => `<th>${escapeHtml(a.name || a.type || '')}</th>`).join('')}
                                </tr>
                            </thead>
                            <tbody>
                                ${accountTypes[0].min_deposit !== undefined ? `
                                <tr>
                                    <td><strong>æœ€ä½å…¥é‡‘</strong></td>
                                    ${accountTypes.map(a => `<td>${escapeHtml(a.min_deposit || '-')}</td>`).join('')}
                                </tr>
                                ` : ''}
                                ${accountTypes[0].leverage !== undefined ? `
                                <tr>
                                    <td><strong>æœ€å¤§æ æ†</strong></td>
                                    ${accountTypes.map(a => `<td>${escapeHtml(a.leverage || '-')}</td>`).join('')}
                                </tr>
                                ` : ''}
                                ${accountTypes[0].fee !== undefined ? `
                                <tr>
                                    <td><strong>äº¤æ˜“è´¹</strong></td>
                                    ${accountTypes.map(a => `<td>${escapeHtml(a.fee || '-')}</td>`).join('')}
                                </tr>
                                ` : ''}
                                ${accountTypes[0].interest !== undefined ? `
                                <tr>
                                    <td><strong>å€Ÿæ¬¾åˆ©æ¯</strong></td>
                                    ${accountTypes.map(a => `<td>${escapeHtml(a.interest || '-')}</td>`).join('')}
                                </tr>
                                ` : ''}
                            </tbody>
                        </table>
                    </div>
                </section>
                ` : ''}
                
                <!-- å¼€æˆ·æ­¥éª¤ï¼ˆæ¨ªå‘ä¸‰ç­‰åˆ†ï¼‰ -->
                ${openingSteps.length > 0 ? `
                <section class="mb-5" aria-labelledby="start-title">
                    <h2 id="start-title" class="h4 mb-3">ğŸš€ å¼€å§‹äº¤æ˜“</h2>
                    <div class="row g-3">
                        ${openingSteps.map((step, index) => {
                            const colors = ['success', 'info', 'warning', 'primary', 'secondary'];
                            const color = colors[index % colors.length];
                            return `
                            <div class="col-md-${openingSteps.length <= 3 ? 4 : 6} text-center">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <div class="step-number bg-${color} text-white">${index + 1}</div>
                                        <h4 class="card-title h6">${escapeHtml(step.title || step.name || `æ­¥éª¤ ${index + 1}`)}</h4>
                                        <p class="card-text small text-muted mb-0">${escapeHtml(step.description || '')}</p>
                                    </div>
                                </div>
                            </div>
                            `;
                        }).join('')}
                    </div>
                    ${p.account_opening_link ? `
                    <div class="mt-4 text-center">
                        <a href="${escapeAttr(p.account_opening_link)}" class="btn btn-primary btn-lg cta-button" target="_blank" rel="noopener">
                            ğŸ¯ ç«‹å³å¼€æˆ·
                        </a>
                    </div>
                    ` : ''}
                </section>
                ` : (hasPlainOpeningSteps ? `
                <section class="mb-5" aria-labelledby="start-title">
                    <h2 id="start-title" class="h4 mb-3">ğŸš€ å¼€å§‹äº¤æ˜“</h2>
                    <div class="row g-3">
                        ${plainOpeningStepsList.map((step, index) => {
                            const colors = ['success', 'info', 'warning', 'primary', 'secondary'];
                            const color = colors[index % colors.length];
                            return `
                            <div class="col-md-${plainOpeningStepsList.length <= 3 ? 4 : 6} text-center">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <div class="step-number bg-${color} text-white">${index + 1}</div>
                                        <h4 class="card-title h6">${escapeHtml(step)}</h4>
                                    </div>
                                </div>
                            </div>
                            `;
                        }).join('')}
                    </div>
                    ${p.account_opening_link ? `
                    <div class="mt-4 text-center">
                        <a href="${escapeAttr(p.account_opening_link)}" class="btn btn-primary btn-lg cta-button" target="_blank" rel="noopener">
                            ğŸ¯ ç«‹å³å¼€æˆ·
                        </a>
                    </div>
                    ` : ''}
                </section>
                ` : '')}
                
                <!-- å®‰å…¨ä¸æ”¯æŒ -->
                ${securityMeasures.length > 0 || customerSupport.length > 0 || hasPlainSecurityMeasures || hasPlainCustomerSupport ? `
                <section aria-labelledby="safety-title">
                    <h2 id="safety-title" class="h4 mb-3">ğŸ”’ å®‰å…¨ä¸æ”¯æŒ</h2>
                    ${securityMeasures.length > 0 ? `
                    <div class="alert alert-success">
                        <h4 class="alert-heading h6">âœ“ å®‰å…¨æªæ–½</h4>
                        <ul class="mb-0">
                            ${securityMeasures.map(item => `<li>${escapeHtml(typeof item === 'string' ? item : item.text || item.description || '')}</li>`).join('')}
                        </ul>
                    </div>
                    ` : (hasPlainSecurityMeasures ? `
                    <div class="alert alert-success">
                        <h4 class="alert-heading h6">âœ“ å®‰å…¨æªæ–½</h4>
                        <ul class="mb-0">
                            ${plainSecurityMeasuresList.map(item => `<li>${escapeHtml(item)}</li>`).join('')}
                        </ul>
                    </div>
                    ` : '')}
                    ${customerSupport.length > 0 ? `
                    <div class="alert alert-info">
                        <h4 class="alert-heading h6">ğŸ“ å®¢æˆ·æ”¯æŒ</h4>
                        <ul class="mb-0">
                            ${customerSupport.map(item => {
                                let text = typeof item === 'string' ? item : '';
                                if (item.type) text = item.type + (item.description ? ` - ${item.description}` : '');
                                if (item.channel) text = item.channel + (item.hours ? ` (${item.hours})` : '');
                                return `<li>${escapeHtml(text)}</li>`;
                            }).join('')}
                        </ul>
                    </div>
                    ` : (hasPlainCustomerSupport ? `
                    <div class="alert alert-info">
                        <h4 class="alert-heading h6">ğŸ“ å®¢æˆ·æ”¯æŒ</h4>
                        <ul class="mb-0">
                            ${plainCustomerSupportList.map(item => `<li>${escapeHtml(item)}</li>`).join('')}
                        </ul>
                    </div>
                    ` : '')}
                </section>
                ` : ''}
            </div>
            
            <!-- ä¾§è¾¹æ  -->
            <aside class="col-lg-4">
                <div class="card shadow-sm sidebar-cta">
                    <div class="card-header bg-primary text-white">
                        <h4 class="card-title h6 mb-0">ğŸ“‹ å¿«é€Ÿä¿¡æ¯</h4>
                    </div>
                    <div class="card-body">
                        <dl class="row mb-3">
                            <dt class="col-6">è¯„åˆ†:</dt>
                            <dd class="col-6">${createStars(p.rating)} (${(parseFloat(p.rating) || 0).toFixed(1)})</dd>
                            
                            <dt class="col-6">æ æ†:</dt>
                            <dd class="col-6">1:${p.max_leverage || '100'}</dd>
                            
                            <dt class="col-6">è´¹ç‡:</dt>
                            <dd class="col-6">${p.fee_rate ? p.fee_rate + '%' : 'æœªå…¬å¼€'}</dd>
                            
                            <dt class="col-6">å®‰å…¨è¯„çº§:</dt>
                            <dd class="col-6"><span class="badge bg-${p.safety_rating === 'A' ? 'success' : p.safety_rating === 'B' ? 'primary' : 'warning'}">${p.safety_rating || 'B'}</span></dd>
                            
                            <dt class="col-6">æˆç«‹å¹´ä»½:</dt>
                            <dd class="col-6">${p.founded_year || 'æœªå…¬å¼€'}</dd>
                        </dl>
                        
                        ${p.account_opening_link ? `
                        <a href="${escapeAttr(p.account_opening_link)}" class="btn btn-primary btn-lg w-100 cta-button" target="_blank" rel="noopener">
                            ğŸ¯ ç«‹å³å¼€æˆ·
                        </a>
                        <p class="text-center text-muted small mt-2 mb-0">å¿«é€Ÿæ³¨å†Œï¼Œ5åˆ†é’Ÿå®Œæˆ</p>
                        ` : ''}
                    </div>
                </div>
                
                <!-- ç›¸å…³é“¾æ¥ -->
                <div class="card mt-4">
                    <div class="card-header bg-light">
                        <h5 class="card-title h6 mb-0">ğŸ“š ç›¸å…³èµ„æº</h5>
                    </div>
                    <ul class="list-group list-group-flush small">
                        <li class="list-group-item"><a href="/wiki/" class="text-decoration-none">æ æ†äº¤æ˜“ç™¾ç§‘</a></li>
                        <li class="list-group-item"><a href="/guides/" class="text-decoration-none">æ–°æ‰‹æŒ‡å—</a></li>
                        <li class="list-group-item"><a href="/qa/" class="text-decoration-none">å¸¸è§é—®é¢˜</a></li>
                        <li class="list-group-item"><a href="/compare/" class="text-decoration-none">å¹³å°å¯¹æ¯”</a></li>
                    </ul>
                </div>
            </aside>
        </div>
        `;
        
        document.getElementById('platform-container').innerHTML = html;
    }
    
    // æ˜¾ç¤ºé”™è¯¯
    function showError(message) {
        document.getElementById('platform-container').innerHTML = `
            <div class="text-center py-5">
                <h1 class="display-1 text-muted">404</h1>
                <p class="lead">${escapeHtml(message)}</p>
                <a href="/platforms/" class="btn btn-primary">è¿”å›å¹³å°åˆ—è¡¨</a>
            </div>
        `;
    }
    
    // ä» API åŠ è½½æ•°æ®
    async function loadPlatformFromAPI() {
        const pathMatch = location.pathname.match(/^\/platforms\/([^\/]+)\/?$/);
        if (!pathMatch) {
            showError('æ— æ•ˆçš„å¹³å°é“¾æ¥');
            return;
        }
        
        const slug = pathMatch[1];
        
        try {
            const response = await fetch(`${API_URL}/api/platforms/by-slug/${encodeURIComponent(slug)}`);
            if (!response.ok) {
                showError('å¹³å°ä¸å­˜åœ¨');
                return;
            }
            const data = await response.json();
            renderPlatform(data);
        } catch (error) {
            console.error('åŠ è½½å¹³å°å¤±è´¥:', error);
            showError('åŠ è½½å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
        }
    }
    
    // åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function() {
        if (platformData) {
            // SSR æ¨¡å¼ï¼šä½¿ç”¨æœåŠ¡ç«¯æ³¨å…¥çš„æ•°æ®
            renderPlatform(platformData);
        } else {
            // CSR æ¨¡å¼ï¼šä» API åŠ è½½
            loadPlatformFromAPI();
        }
    });
    </script>
    
    <!-- Site Settings Loader -->
    <script src="/assets/js/site-settings.js" defer></script>
</body>
</html>

